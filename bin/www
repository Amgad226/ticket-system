#!/usr/bin/env node

/**
 * Module dependencies.
 */

const { log } = require('console');
var app = require('../app');
var debug = require('debug')('support-sys:server');
var http = require('http');
require('dotenv').config();

/**
 * Get port from environment and store in Express.
 */

var port = (process.env.PORT || 3000);
// app.set('port', port);

/**
 * Create HTTP server.
 */ 

var server = http.createServer(app);
const io = require('socket.io')(server);


io.on('connection', socket => {

  socket.on('event', message => {
    console.log('send event___',message);
    socket.broadcast.emit('get', message)
    // socket.broadcast.emit('test test ', message)
    socket.emit('get', message);
    // socket.emit('test test', message);

    
});
socket.on('event2', message => {
  console.log('send event2___',message);
  socket.broadcast.emit('get2sdjkashdkjasghdkasj  ', message)
  // socket.broadcast.emit('test test ', message)
  socket.emit('get2sdjkashdkjasghdkasj', message);
  // socket.emit('test test', message);

  
});

socket.on('event3', message => {
  console.log('send event3___',message);
  socket.broadcast.emit('get3', message)
  // socket.broadcast.emit('test test ', message)
  socket.emit('get3', message);
  // socket.emit('test test', message);

  
});


  socket.on('disconnect', () => {
   
          // socket.broadcast.emit('user-disconnected', socket.id);
          console.log('user-disconnected');
      
  });

});



server.listen(port);
